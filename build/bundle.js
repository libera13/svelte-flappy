var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function n(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function h(t,e,i){t.insertBefore(e,i||null)}function p(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function l(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function u(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,i,n){t.style.setProperty(e,i,n?"important":"")}let g;function b(t){g=t}const $=[],P=[],x=[],w=[],v=Promise.resolve();let y=!1;function S(t){x.push(t)}let _=!1;const O=new Set;function T(){if(!_){_=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];b(e),k(e.$$)}for(b(null),$.length=0;P.length;)P.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];O.has(e)||(O.add(e),e())}x.length=0}while($.length);for(;w.length;)w.pop()();y=!1,_=!1,O.clear()}}function k(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const z=new Set;function F(t,e){t&&t.i&&(z.delete(t),t.i(e))}function W(t,e,i,n){if(t&&t.o){if(z.has(t))return;z.add(t),undefined.c.push((()=>{z.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}function E(t){t&&t.c()}function N(t,i,s,o){const{fragment:h,on_mount:p,on_destroy:c,after_update:a}=t.$$;h&&h.m(i,s),o||S((()=>{const i=p.map(e).filter(r);c?c.push(...i):n(i),t.$$.on_mount=[]})),a.forEach(S)}function j(t,e){const i=t.$$;null!==i.fragment&&(n(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function C(t,e){-1===t.$$.dirty[0]&&($.push(t),y||(y=!0,v.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,r,s,o,h,c,a=[-1]){const d=g;b(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:h,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:a,skip_bound:!1};let l=!1;if(f.ctx=s?s(e,r.props||{},((t,i,...n)=>{const r=n.length?n[0]:i;return f.ctx&&h(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),l&&C(e,t)),i})):[],f.update(),l=!0,n(f.before_update),f.fragment=!!o&&o(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();r.intro&&F(e.$$.fragment),N(e,r.target,r.anchor,r.customElement),T()}b(d)}class X{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class A{constructor(t=800,e=400,i=50,n=170,r=70,s=350,o=.7,h=1,p=20,c=40,a=20,d=1.5,f=10,l=.23){this.height=t,this.width=e,this.pipeWidth=i,this.pipeGap=n,this.minTopForTopPipe=r,this.maxTopForTopPipe=s,this.generateNewPipePercent=o,this.speed=h,this.groundHeight=p,this.birdX=c,this.birdSize=a,this.gravity=d,this.jumpVelocity=f,this.slowVelocityBy=l,this.velocity=0}newGame(){let t=this.createPipe(!0),e=this.createPipe(!1);return this.frame={firstPipe:t,secondPipe:e,score:0,width:this.width,height:this.height,gameOver:!1,gameStarted:!1,ground:{height:this.groundHeight},bird:{left:this.birdX,top:this.height/2-this.birdSize/2,size:this.birdSize}},this.frame}randomYForTopPipe(){return this.minTopForTopPipe+(this.maxTopForTopPipe-this.minTopForTopPipe)*Math.random()}nextFrame(){return this.frame.gameOver||!this.frame.gameStarted?this.frame:(this.frame.firstPipe=this.movePipe(this.frame.firstPipe,this.frame.secondPipe),this.frame.secondPipe=this.movePipe(this.frame.secondPipe,this.frame.firstPipe),this.hasCollidedWithPipe()?(this.frame.gameOver=!0,this.frame):this.frame.bird.top>=this.height-this.groundHeight-this.birdSize?(this.frame.bird.top=this.height-this.groundHeight-this.birdSize,this.frame.gameOver=!0,this.frame):(this.velocity>0&&(this.velocity-=this.slowVelocityBy),this.frame.firstPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame.bird.top+=Math.pow(this.gravity,2)-this.velocity,this.frame.secondPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame))}createPipe(t){const e=this.randomYForTopPipe();return{topPipe:{top:0,height:e},bottomPipe:{top:e+this.pipeGap,height:this.height},left:this.width-this.pipeWidth,width:this.pipeWidth,show:t}}start(){return this.newGame(),this.frame.gameStarted=!0,this.frame}jump(){this.velocity<=0&&(this.velocity+=this.jumpVelocity)}hasCollidedWithPipe(){return this.frame.firstPipe.show&&this.checkPipe(this.frame.firstPipe.left)?!(this.frame.bird.top>this.frame.firstPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.firstPipe.bottomPipe.top):!(!this.frame.secondPipe.show||!this.checkPipe(this.frame.secondPipe.left))&&!(this.frame.bird.top>this.frame.secondPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.secondPipe.bottomPipe.top)}checkPipe(t){return t<=this.birdX+this.birdSize&&t+this.pipeWidth>=this.birdX}movePipe(t,e){return t.show&&t.left<=-1*this.pipeWidth?(t.show=!1,t):(t.show&&(t.left-=this.speed),e.left<this.width*(1-this.generateNewPipePercent)&&e.show&&!t.show?this.createPipe(!0):t)}}function H(t){let e,i,n,r,s,f,g=JSON.stringify(t[0],null,2)+"";return{c(){e=c("section"),i=d(),n=c("pre"),r=a(g),s=a("\n\n        "),f=c("section"),m(e,"left",t[0].left+"px"),m(e,"top",t[0].topPipe.top+"px"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].topPipe.height+"px"),l(e,"class","top-pipe pipe svelte-1i1t684"),m(f,"left",t[0].left+"px"),m(f,"top",t[0].bottomPipe.top+"px"),m(f,"width",t[0].width+"px"),m(f,"height",t[0].bottomPipe.height+"px"),l(f,"class","top-bottom pipe svelte-1i1t684")},m(t,p){h(t,e,p),h(t,i,p),h(t,n,p),o(n,r),o(n,s),h(t,f,p)},p(t,i){1&i&&m(e,"left",t[0].left+"px"),1&i&&m(e,"top",t[0].topPipe.top+"px"),1&i&&m(e,"width",t[0].width+"px"),1&i&&m(e,"height",t[0].topPipe.height+"px"),1&i&&g!==(g=JSON.stringify(t[0],null,2)+"")&&u(r,g),1&i&&m(f,"left",t[0].left+"px"),1&i&&m(f,"top",t[0].bottomPipe.top+"px"),1&i&&m(f,"width",t[0].width+"px"),1&i&&m(f,"height",t[0].bottomPipe.height+"px")},d(t){t&&p(e),t&&p(i),t&&p(n),t&&p(f)}}}function V(e){let i,n=e[0].show&&H(e);return{c(){n&&n.c(),i=a("")},m(t,e){n&&n.m(t,e),h(t,i,e)},p(t,[e]){t[0].show?n?n.p(t,e):(n=H(t),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},i:t,o:t,d(t){n&&n.d(t),t&&p(i)}}}function B(t,e,i){let{pipe:n}=e;return t.$$set=t=>{"pipe"in t&&i(0,n=t.pipe)},[n]}class M extends X{constructor(t){super(),G(this,t,B,V,s,{pipe:0})}}function J(e){let i;return{c(){i=c("div"),m(i,"width",e[0].size+"px"),m(i,"height",e[0].size+"px"),m(i,"top",e[0].top+"px"),m(i,"left",e[0].left+"px"),l(i,"id","bird"),l(i,"class","svelte-1mfcebb")},m(t,e){h(t,i,e)},p(t,[e]){1&e&&m(i,"width",t[0].size+"px"),1&e&&m(i,"height",t[0].size+"px"),1&e&&m(i,"top",t[0].top+"px"),1&e&&m(i,"left",t[0].left+"px")},i:t,o:t,d(t){t&&p(i)}}}function L(t,e,i){let{bird:n}=e;return t.$$set=t=>{"bird"in t&&i(0,n=t.bird)},[n]}class Y extends X{constructor(t){super(),G(this,t,L,J,s,{bird:0})}}function q(t){let e,i,n,r,s,a=t[0].gameOver&&I(t);return{c(){e=c("section"),a&&a.c(),i=d(),n=c("button"),n.textContent="Start Game",l(n,"class","svelte-1ged3b0"),l(e,"id","init-screen"),l(e,"class","svelte-1ged3b0")},m(p,c){h(p,e,c),a&&a.m(e,null),o(e,i),o(e,n),r||(s=f(n,"click",t[2]),r=!0)},p(t,n){t[0].gameOver?a?a.p(t,n):(a=I(t),a.c(),a.m(e,i)):a&&(a.d(1),a=null)},d(t){t&&p(e),a&&a.d(),r=!1,s()}}}function I(t){let e,i,n,r,s,f=t[0].score+"";return{c(){e=c("h2"),e.textContent="Game Over",i=d(),n=c("h2"),r=a("Score "),s=a(f),l(e,"class","svelte-1ged3b0"),l(n,"class","svelte-1ged3b0")},m(t,p){h(t,e,p),h(t,i,p),h(t,n,p),o(n,r),o(n,s)},p(t,e){1&e&&f!==(f=t[0].score+"")&&u(s,f)},d(t){t&&p(e),t&&p(i),t&&p(n)}}}function D(t){let e,i,n,r,s,g,b,$,P,x,w,v,y,S,_,O=t[0].score+"";s=new Y({props:{bird:t[0].bird}}),b=new M({props:{pipe:t[0].firstPipe}}),P=new M({props:{pipe:t[0].secondPipe}});let T=(t[0].gameOver||!t[0].gameStarted)&&q(t);return{c(){e=c("main"),i=c("section"),n=a(O),r=d(),E(s.$$.fragment),g=d(),E(b.$$.fragment),$=d(),E(P.$$.fragment),x=d(),T&&T.c(),w=d(),v=c("section"),l(i,"id","score"),l(i,"class","svelte-1ged3b0"),m(v,"height",t[0].ground.height+"px"),l(v,"id","ground"),l(v,"class","svelte-1ged3b0"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].height+"px"),l(e,"class","game svelte-1ged3b0")},m(p,c){h(p,e,c),o(e,i),o(i,n),o(e,r),N(s,e,null),o(e,g),N(b,e,null),o(e,$),N(P,e,null),o(e,x),T&&T.m(e,null),o(e,w),o(e,v),y=!0,S||(_=f(window,"click",t[1]),S=!0)},p(t,[i]){(!y||1&i)&&O!==(O=t[0].score+"")&&u(n,O);const r={};1&i&&(r.bird=t[0].bird),s.$set(r);const o={};1&i&&(o.pipe=t[0].firstPipe),b.$set(o);const h={};1&i&&(h.pipe=t[0].secondPipe),P.$set(h),t[0].gameOver||!t[0].gameStarted?T?T.p(t,i):(T=q(t),T.c(),T.m(e,w)):T&&(T.d(1),T=null),(!y||1&i)&&m(v,"height",t[0].ground.height+"px"),(!y||1&i)&&m(e,"width",t[0].width+"px"),(!y||1&i)&&m(e,"height",t[0].height+"px")},i(t){y||(F(s.$$.fragment,t),F(b.$$.fragment,t),F(P.$$.fragment,t),y=!0)},o(t){W(s.$$.fragment,t),W(b.$$.fragment,t),W(P.$$.fragment,t),y=!1},d(t){t&&p(e),j(s),j(b),j(P),T&&T.d(),S=!1,_()}}}function K(t,e,i){const n=new A;let r=n.newGame();return setInterval((()=>{i(0,r=n.nextFrame())}),1e3/90),[r,function(){n.jump()},function(){i(0,r=n.start())}]}class Q extends X{constructor(t){super(),G(this,t,K,D,s,{})}}function R(e){let i,n,r,s;return i=new Q({}),{c(){E(i.$$.fragment),n=d(),r=c("p"),r.textContent="hahha"},m(t,e){N(i,t,e),h(t,n,e),h(t,r,e),s=!0},p:t,i(t){s||(F(i.$$.fragment,t),s=!0)},o(t){W(i.$$.fragment,t),s=!1},d(t){j(i,t),t&&p(n),t&&p(r)}}}return new class extends X{constructor(t){super(),G(this,t,null,R,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
