var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function n(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function h(t,e,i){t.insertBefore(e,i||null)}function p(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(t,e,i,r){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)}function l(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function u(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,i,r){t.style.setProperty(e,i,r?"important":"")}let g;function b(t){g=t}const $=[],P=[],x=[],w=[],v=Promise.resolve();let y=!1;function _(t){x.push(t)}let S=!1;const T=new Set;function k(){if(!S){S=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];b(e),z(e.$$)}for(b(null),$.length=0;P.length;)P.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];T.has(e)||(T.add(e),e())}x.length=0}while($.length);for(;w.length;)w.pop()();y=!1,S=!1,T.clear()}}function z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const O=new Set;function F(t,e){t&&t.i&&(O.delete(t),t.i(e))}function W(t,e,i,r){if(t&&t.o){if(O.has(t))return;O.add(t),undefined.c.push((()=>{O.delete(t),r&&(i&&t.d(1),r())})),t.o(e)}}function E(t){t&&t.c()}function j(t,i,n,o){const{fragment:h,on_mount:p,on_destroy:c,after_update:a}=t.$$;h&&h.m(i,n),o||_((()=>{const i=p.map(e).filter(s);c?c.push(...i):r(i),t.$$.on_mount=[]})),a.forEach(_)}function G(t,e){const i=t.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function C(t,e){-1===t.$$.dirty[0]&&($.push(t),y||(y=!0,v.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(e,s,n,o,h,c,a=[-1]){const d=g;b(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:h,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:a,skip_bound:!1};let l=!1;if(f.ctx=n?n(e,s.props||{},((t,i,...r)=>{const s=r.length?r[0]:i;return f.ctx&&h(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),l&&C(e,t)),i})):[],f.update(),l=!0,r(f.before_update),f.fragment=!!o&&o(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();s.intro&&F(e.$$.fragment),j(e,s.target,s.anchor,s.customElement),k()}b(d)}class X{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class A{constructor(t=800,e=400,i=50,r=170,s=70,n=350,o=.7,h=1,p=20,c=40,a=20,d=1.5,f=10,l=.23){this.height=t,this.width=e,this.pipeWidth=i,this.pipeGap=r,this.minTopForTopPipe=s,this.maxTopForTopPipe=n,this.generateNewPipePercent=o,this.speed=h,this.groundHeight=p,this.birdX=c,this.birdSize=a,this.gravity=d,this.jumpVelocity=f,this.slowVelocityBy=l,this.velocity=0}newGame(){let t=this.createPipe(!0),e=this.createPipe(!1);return this.frame={firstPipe:t,secondPipe:e,score:0,width:this.width,height:this.height,gameOver:!1,gameStarted:!1,ground:{height:this.groundHeight},bird:{left:this.birdX,top:this.height/2-this.birdSize/2,size:this.birdSize}},this.frame}randomYForTopPipe(){return this.minTopForTopPipe+(this.maxTopForTopPipe-this.minTopForTopPipe)*Math.random()}nextFrame(){return this.frame.gameOver||!this.frame.gameStarted?this.frame:(this.frame.firstPipe=this.movePipe(this.frame.firstPipe,this.frame.secondPipe),this.frame.secondPipe=this.movePipe(this.frame.secondPipe,this.frame.firstPipe),this.hasCollidedWithPipe()?(this.frame.gameOver=!0,this.frame):this.frame.bird.top>=this.height-this.groundHeight-this.birdSize?(this.frame.bird.top=this.height-this.groundHeight-this.birdSize,this.frame.gameOver=!0,this.frame):(this.velocity>0&&(this.velocity-=this.slowVelocityBy),this.frame.firstPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame.bird.top+=Math.pow(this.gravity,2)-this.velocity,this.frame.secondPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame))}createPipe(t){const e=this.randomYForTopPipe();return{topPipe:{top:0,height:e},bottomPipe:{top:e+this.pipeGap,height:this.height},left:this.width-this.pipeWidth,width:this.pipeWidth,show:t}}start(){return this.newGame(),this.frame.gameStarted=!0,this.frame}jump(){this.velocity<=0&&(this.velocity+=this.jumpVelocity)}hasCollidedWithPipe(){return this.frame.firstPipe.show&&this.checkPipe(this.frame.firstPipe.left)?!(this.frame.bird.top>this.frame.firstPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.firstPipe.bottomPipe.top):!(!this.frame.secondPipe.show||!this.checkPipe(this.frame.secondPipe.left))&&!(this.frame.bird.top>this.frame.secondPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.secondPipe.bottomPipe.top)}checkPipe(t){return t<=this.birdX+this.birdSize&&t+this.pipeWidth>=this.birdX}movePipe(t,e){return t.show&&t.left<=-1*this.pipeWidth?(t.show=!1,t):(t.show&&(t.left-=this.speed),e.left<this.width*(1-this.generateNewPipePercent)&&e.show&&!t.show?this.createPipe(!0):t)}}function H(t){let e,i,r,s;return{c(){e=c("section"),i=d(),r=c("pre"),s=c("section"),m(e,"left",t[0].left+"px"),m(e,"top",t[0].topPipe.top+"px"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].topPipe.height+"px"),l(e,"class","top-pipe pipe svelte-1i1t684"),m(s,"left",t[0].left+"px"),m(s,"top",t[0].bottomPipe.top+"px"),m(s,"width",t[0].width+"px"),m(s,"height",t[0].bottomPipe.height+"px"),l(s,"class","top-bottom pipe svelte-1i1t684")},m(t,n){h(t,e,n),h(t,i,n),h(t,r,n),h(t,s,n)},p(t,i){1&i&&m(e,"left",t[0].left+"px"),1&i&&m(e,"top",t[0].topPipe.top+"px"),1&i&&m(e,"width",t[0].width+"px"),1&i&&m(e,"height",t[0].topPipe.height+"px"),1&i&&m(s,"left",t[0].left+"px"),1&i&&m(s,"top",t[0].bottomPipe.top+"px"),1&i&&m(s,"width",t[0].width+"px"),1&i&&m(s,"height",t[0].bottomPipe.height+"px")},d(t){t&&p(e),t&&p(i),t&&p(r),t&&p(s)}}}function V(e){let i,r=e[0].show&&H(e);return{c(){r&&r.c(),i=a("")},m(t,e){r&&r.m(t,e),h(t,i,e)},p(t,[e]){t[0].show?r?r.p(t,e):(r=H(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&p(i)}}}function B(t,e,i){let{pipe:r}=e;return t.$$set=t=>{"pipe"in t&&i(0,r=t.pipe)},[r]}class M extends X{constructor(t){super(),N(this,t,B,V,n,{pipe:0})}}function L(e){let i;return{c(){i=c("div"),m(i,"width",e[0].size+"px"),m(i,"height",e[0].size+"px"),m(i,"top",e[0].top+"px"),m(i,"left",e[0].left+"px"),l(i,"id","bird"),l(i,"class","svelte-1mfcebb")},m(t,e){h(t,i,e)},p(t,[e]){1&e&&m(i,"width",t[0].size+"px"),1&e&&m(i,"height",t[0].size+"px"),1&e&&m(i,"top",t[0].top+"px"),1&e&&m(i,"left",t[0].left+"px")},i:t,o:t,d(t){t&&p(i)}}}function Y(t,e,i){let{bird:r}=e;return t.$$set=t=>{"bird"in t&&i(0,r=t.bird)},[r]}class q extends X{constructor(t){super(),N(this,t,Y,L,n,{bird:0})}}function I(t){let e,i,r,s,n,a=t[0].gameOver&&D(t);return{c(){e=c("section"),a&&a.c(),i=d(),r=c("button"),r.textContent="Start Game",l(r,"class","svelte-1ged3b0"),l(e,"id","init-screen"),l(e,"class","svelte-1ged3b0")},m(p,c){h(p,e,c),a&&a.m(e,null),o(e,i),o(e,r),s||(n=f(r,"click",t[2]),s=!0)},p(t,r){t[0].gameOver?a?a.p(t,r):(a=D(t),a.c(),a.m(e,i)):a&&(a.d(1),a=null)},d(t){t&&p(e),a&&a.d(),s=!1,n()}}}function D(t){let e,i,r,s,n,f=t[0].score+"";return{c(){e=c("h2"),e.textContent="Game Over",i=d(),r=c("h2"),s=a("Score "),n=a(f),l(e,"class","svelte-1ged3b0"),l(r,"class","svelte-1ged3b0")},m(t,p){h(t,e,p),h(t,i,p),h(t,r,p),o(r,s),o(r,n)},p(t,e){1&e&&f!==(f=t[0].score+"")&&u(n,f)},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function J(t){let e,i,r,s,n,g,b,$,P,x,w,v,y,_,S,T=t[0].score+"";n=new q({props:{bird:t[0].bird}}),b=new M({props:{pipe:t[0].firstPipe}}),P=new M({props:{pipe:t[0].secondPipe}});let k=(t[0].gameOver||!t[0].gameStarted)&&I(t);return{c(){e=c("main"),i=c("section"),r=a(T),s=d(),E(n.$$.fragment),g=d(),E(b.$$.fragment),$=d(),E(P.$$.fragment),x=d(),k&&k.c(),w=d(),v=c("section"),l(i,"id","score"),l(i,"class","svelte-1ged3b0"),m(v,"height",t[0].ground.height+"px"),l(v,"id","ground"),l(v,"class","svelte-1ged3b0"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].height+"px"),l(e,"class","game svelte-1ged3b0")},m(p,c){h(p,e,c),o(e,i),o(i,r),o(e,s),j(n,e,null),o(e,g),j(b,e,null),o(e,$),j(P,e,null),o(e,x),k&&k.m(e,null),o(e,w),o(e,v),y=!0,_||(S=f(window,"click",t[1]),_=!0)},p(t,[i]){(!y||1&i)&&T!==(T=t[0].score+"")&&u(r,T);const s={};1&i&&(s.bird=t[0].bird),n.$set(s);const o={};1&i&&(o.pipe=t[0].firstPipe),b.$set(o);const h={};1&i&&(h.pipe=t[0].secondPipe),P.$set(h),t[0].gameOver||!t[0].gameStarted?k?k.p(t,i):(k=I(t),k.c(),k.m(e,w)):k&&(k.d(1),k=null),(!y||1&i)&&m(v,"height",t[0].ground.height+"px"),(!y||1&i)&&m(e,"width",t[0].width+"px"),(!y||1&i)&&m(e,"height",t[0].height+"px")},i(t){y||(F(n.$$.fragment,t),F(b.$$.fragment,t),F(P.$$.fragment,t),y=!0)},o(t){W(n.$$.fragment,t),W(b.$$.fragment,t),W(P.$$.fragment,t),y=!1},d(t){t&&p(e),G(n),G(b),G(P),k&&k.d(),_=!1,S()}}}function K(t,e,i){const r=new A;let s=r.newGame();return setInterval((()=>{i(0,s=r.nextFrame())}),1e3/90),[s,function(){r.jump()},function(){i(0,s=r.start())}]}class Q extends X{constructor(t){super(),N(this,t,K,J,n,{})}}function R(e){let i,r;return i=new Q({}),{c(){E(i.$$.fragment)},m(t,e){j(i,t,e),r=!0},p:t,i(t){r||(F(i.$$.fragment,t),r=!0)},o(t){W(i.$$.fragment,t),r=!1},d(t){G(i,t)}}}return new class extends X{constructor(t){super(),N(this,t,null,R,n,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
